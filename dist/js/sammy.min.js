var app=angular.module("Sammy-gui",["ui.bootstrap","ui.router","ngCookies","chart.js"]).filter("secondsToDateTime",[function(){return function(e){return new Date(1970,0,1).setSeconds(e)}}]).filter("underscoreToSpace",function(){return function(e){return e.replace(/_/g," ")}});
"use strict";app.config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/"),t.state("index",{url:"/",templateUrl:"templates/dashboard.html"}).state("cpu",{url:"/cpu",templateUrl:"templates/cpu.html"}).state("mem",{url:"/mem",templateUrl:"templates/mem.html"})}]);
function AlertsCtrl(l,t){l.alerts=t.alerts,l.closeAlert=function(l){t.closeAlert(l)}}app.controller("AlertsCtrl",["$scope","Alert",AlertsCtrl]);
function CpuCtrl(e,a,t,r,n){e.temps=[],e.labels=["Core 0","Core 1","Core 2","Core 3"],e.loadLabels=["Load","Available"],e.data=[],e.getCpuTemp=function(){a.get(r.url+"/cpu/temp").success(function(a,t,r,n){e.temps.length>=60&&e.temps.shift(),e.temps.push(a.temperatures),e.cputemploading=!1,e.arrItem=[];for(var o=0;null!=a.temperatures[o];)e.arrItem.push(a.temperatures[o].slice(1,-4)),o++;e.data=e.arrItem}).error(function(e,a,t,r){n.addAlert("danger","fa-exclamation-triangle","Can't fetch CPU temperatures")})},e.getCpuLoad=function(){a.get(r.url+"/cpu/load").success(function(a,t,r,n){a.load_array.percentage=parseFloat(a.load_array.percentage.slice(0,-1)).toFixed(2)+"%",e.load=a,e.loadData=[parseInt(a.load_array.percentage,10),100-parseInt(a.load_array.percentage,10)],e.currentPercentage=a.load_array.percentage.slice(0,-1),e.loadloading=!1}).error(function(e,a,t,r){n.addAlert("danger","fa-exclamation-triangle","Can't fetch CPU load")})},e.loading=!0,a.get(r.url+"/cpu/info").success(function(a,t,r,n){e.cpuinfo=a,e.loading=!1}).error(function(e,a,t,r){n.addAlert("danger","fa-exclamation-triangle","Can't fetch CPU information")}),e.cputemploading=!0,e.getCpuTemp(),t(e.getCpuTemp,1e3),e.loadloading=!0,e.getCpuLoad(),t(e.getCpuLoad,5e3)}app.controller("CpuCtrl",["$scope","$http","$interval","Config","Alert",CpuCtrl]);
function DashboardCtrl(n,o,a,t){n.cpuloading=!0,n.memloading=!0,n.sysloading=!0,o.get(a.url+"/cpu/info").success(function(o,a,t,e){n.cpuinfo=o.cpu_info,n.cpuloading=!1}).error(function(n,o,a,e){t.addAlert("danger","fa-exclamation-triangle","Can't fetch CPU information")}),o.get(a.url+"/mem/load").success(function(o,a,t,e){n.meminfo=o["Mem:"],n.memloading=!1}).error(function(n,o,a,e){t.addAlert("danger","fa-exclamation-triangle","Can't fetch memory information")}),o.get(a.url+"/sysinfo").success(function(o,a,t,e){n.sysinfo=o,n.sysloading=!1}).error(function(n,o,a,e){t.addAlert("danger","fa-exclamation-triangle","Can't fetch system information.")})}app.controller("DashboardCtrl",["$scope","$http","Config","Alert",DashboardCtrl]);
function MasterCtrl(t,e){var g=992;t.getWidth=function(){return window.innerWidth},t.$watch(t.getWidth,function(o,n){o>=g?angular.isDefined(e.get("toggle"))?t.toggle=!!e.get("toggle"):t.toggle=!0:t.toggle=!1}),t.toggleSidebar=function(){t.toggle=!t.toggle,e.put("toggle",t.toggle)},window.onresize=function(){t.$apply()}}app.controller("MasterCtrl",["$scope","$cookieStore",MasterCtrl]);
function MemCtrl(e,a,m,t,o){e.memoryloading=!0,a.get(t.url+"/mem").success(function(a,m,t,o){e.meminfo=a,e.memoryloading=!1}).error(function(e,a,m,t){o.addAlert("danger","fa-exclamation-triangle","Can't fetch memory information")}),e.getMemLoad=function(){a.get(t.url+"/mem/load").success(function(a,m,t,o){e.memLoad=a;e.memLoad["Mem:"].used.length;"m"==e.memLoad["Mem:"].used.slice(r-1,r).toLowerCase()?e.currentSwapPercentage=e.memLoad["Mem:"].used.slice(0,-1)/1e3/e.memLoad["Mem:"].total.slice(0,-1)*100:e.currentPercentage=e.memLoad["Mem:"].used.slice(0,-1)/e.memLoad["Mem:"].total.slice(0,-1)*100;var r=e.memLoad["Swap:"].used.length;"m"==e.memLoad["Swap:"].used.slice(r-1,r).toLowerCase()?e.currentSwapPercentage=e.memLoad["Swap:"].used.slice(0,-1)/1e3/e.memLoad["Swap:"].total.slice(0,-1)*100:e.currentSwapPercentage=e.memLoad["Swap:"].used.slice(0,-1)/e.memLoad["Swap:"].total.slice(0,-1)*100}).error(function(e,a,m,t){o.addAlert("danger","fa-exclamation-triangle","Can't fetch memory load")})},e.getMemLoad(),m(e.getMemLoad,1e3)}app.controller("MemCtrl",["$scope","$http","$interval","Config","Alert",MemCtrl]);
function rdLoading(){var d={restrict:"AE",template:'<div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'};return d}angular.module("Sammy-gui").directive("rdLoading",rdLoading);
function rdWidgetBody(){var d={requires:"^rdWidget",scope:{loading:"@?",classes:"@?"},transclude:!0,template:'<div class="widget-body" ng-class="classes"><rd-loading ng-show="loading"></rd-loading><div ng-hide="loading" class="widget-content" ng-transclude></div></div>',restrict:"E"};return d}angular.module("Sammy-gui").directive("rdWidgetBody",rdWidgetBody);
function rdWidgetFooter(){var e={requires:"^rdWidget",transclude:!0,template:'<div class="widget-footer" ng-transclude></div>',restrict:"E"};return e}angular.module("Sammy-gui").directive("rdWidgetFooter",rdWidgetFooter);
function rdWidgetTitle(){var i={requires:"^rdWidget",scope:{title:"@",icon:"@",image:"@",width:"@"},transclude:!0,template:'<div class="widget-header"><div class="row"><div class="pull-left"><i class="fa" ng-class="icon"></i> {{title}} </div><div class="pull-right col-xs-6 col-sm-4" ng-transclude></div></div></div>',restrict:"E"};return i}angular.module("Sammy-gui").directive("rdWidgetHeader",rdWidgetTitle);
function rdWidget(){var d={transclude:!0,template:'<div class="widget" ng-transclude></div>',restrict:"EA"};return d}angular.module("Sammy-gui").directive("rdWidget",rdWidget);
app.service("Alert",function(){this.alerts=[],this.addAlert=function(t,s,e){var i=!1;if(this.alerts.length>0){for(var l=0;l<this.alerts.length;l++)if(this.alerts[l].msg===e){i=!0;break}i||this.alerts.push({type:t,icon:s,msg:e})}else this.alerts.push({type:t,icon:s,msg:e})},this.closeAlert=function(t){this.alerts.splice(t,1)}});
app.service("Config",function(){this.url=configItems.APIurl});